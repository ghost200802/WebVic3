# WebVic3 - 经济模拟策略游戏

一款基于Web的大型经济模拟策略游戏，核心玩法参考Paradox的《维多利亚3》，模拟从石器时代到AI时代的文明发展历程。

## 项目简介

WebVic3 是一款深度经济模拟游戏，玩家扮演一个国家/文明的领导者，从石器时代开始，通过发展经济、科技进步、人口管理，带领文明从原始社会走向AI时代。核心体验在于深度经济系统的运筹帷幄。

### 核心设计理念

- **深度经济模拟**：真实模拟供需关系、生产链条、市场波动
- **历史演进感**：体验人类文明从采集狩猎到AI时代的技术跃迁
- **系统涌现**：各系统相互作用产生有趣的策略空间
- **可理解性**：复杂系统需要清晰的UI呈现

## 技术栈

### 前端
- Vue 3.x - UI框架
- TypeScript 5.x - 类型安全
- Vite 5.x - 构建工具
- Pinia - 状态管理
- Tailwind CSS - 样式系统
- @vueuse/core - Vue组合式API工具集

### 后端
- Node.js 20.x LTS - 运行时环境
- Fastify 4.x - Web框架
- TypeScript 5.x - 类型安全
- MongoDB - 数据库

### 开发工具
- pnpm - 包管理器
- Jest - 测试框架
- ESLint - 代码规范

## 项目结构

```
WebVic3/
├── apps/
│   ├── web/              # Vue3前端应用
│   │   ├── src/
│   │   │   ├── components/     # UI组件
│   │   │   ├── views/          # 页面视图
│   │   │   ├── stores/         # Pinia状态
│   │   │   ├── router/         # 路由配置
│   │   │   ├── composables/    # Vue组合式函数
│   │   │   └── adapters/       # 核心逻辑适配器
│   │   └── ...
│   └── server/           # Node.js后端应用
│       ├── src/
│       │   ├── routes/         # API路由
│       │   ├── services/       # 业务逻辑
│       │   ├── models/         # 数据模型
│       │   ├── middleware/     # 中间件
│       │   ├── config/         # 配置
│       │   └── db/            # 数据库连接
│       └── ...
├── packages/
│   └── core/             # 游戏核心逻辑（共享）
│       ├── src/
│       │   ├── systems/        # 游戏系统
│       │   │   ├── economy/    # 经济系统
│       │   │   ├── production/ # 生产系统
│       │   │   ├── population/ # 人口系统
│       │   │   ├── technology/ # 科技系统
│       │   │   ├── terrain/    # 地形系统
│       │   │   ├── transport/  # 运输系统
│       │   │   └── time/      # 时间系统
│       │   ├── models/         # 数据模型
│       │   ├── interfaces/     # 接口定义
│       │   ├── utils/          # 工具函数
│       │   ├── algorithms/     # 核心算法
│       │   ├── serialization/  # 序列化
│       │   └── index.ts       # 导出
│       └── __tests__/         # 单元测试
├── docs/                    # 文档
└── ...
```

## 快速开始

### 环境要求

- Node.js >= 20.0.0
- pnpm >= 8.0.0
- MongoDB（用于后端数据持久化）

### 安装依赖

```bash
pnpm install
```

### 启动开发环境

同时启动前端和后端：

```bash
pnpm dev
```

仅启动前端：

```bash
pnpm dev:web
```

仅启动后端：

```bash
pnpm dev:server
```

### 构建项目

构建所有项目：

```bash
pnpm build
```

仅构建前端：

```bash
pnpm build:web
```

仅构建后端：

```bash
pnpm build:server
```

## 运行代码检查

### 类型检查

```bash
pnpm typecheck
```

### 代码检查

```bash
pnpm lint
```

### 自动修复代码问题

```bash
pnpm lint:fix
```

### 运行测试

```bash
pnpm test
```

### 查看测试覆盖率

```bash
pnpm test:coverage
```

## 开发文档

### 总体文档
- [总体策划文档](./docs/总体策划文档.md) - 游戏整体设计和玩法说明
- [技术栈文档](./docs/技术栈文档.md) - 技术架构和选型说明
- [AI代码规范](./docs/AI代码规范.md) - 开发规范和编码标准

### 实现路线图
- [00-总体实现路线图](./docs/实现路线图/00-总体实现路线图.md) - 项目开发总览
- [阶段1-项目初始化](./docs/实现路线图/阶段1-项目初始化.md) - 项目初始化
- [阶段2-核心数据模型](./docs/实现路线图/阶段2-核心数据模型.md) - 数据模型定义
- [阶段3-基础系统实现](./docs/实现路线图/阶段3-基础系统实现.md) - 基础系统实现
- [阶段4-高级系统实现](./docs/实现路线图/阶段4-高级系统实现.md) - 六大核心系统实现
- [阶段5-UI层实现](./docs/实现路线图/阶段5-UI层实现.md) - UI层实现
- [阶段6-后端实现](./docs/实现路线图/阶段6-后端实现.md) - 后端API实现

### 分系统文档
- [生产系统](./docs/分系统策划/生产系统.md) - 生产系统详细设计
- [市场与价格系统](./docs/分系统策划/市场与价格系统.md) - 市场与价格系统详细设计
- [人口与就业系统](./docs/分系统策划/人口与就业系统.md) - 人口与就业系统详细设计
- [科技系统](./docs/分系统策划/科技系统.md) - 科技系统详细设计
- [地形地图系统](./docs/分系统策划/地形地图系统.md) - 地形地图系统详细设计
- [运输系统](./docs/分系统策划/运输系统.md) - 运输系统详细设计

## 开发规范说明

本项目遵循以下开发规范：

1. **核心逻辑独立**：核心游戏逻辑与UI框架、平台完全独立
2. **类型安全**：全面使用TypeScript类型系统，确保代码安全
3. **纯函数优先**：游戏计算逻辑使用纯函数，便于测试和复用
4. **接口抽象**：通过接口层与UI框架解耦
5. **无DOM依赖**：核心逻辑不使用浏览器特有API

详细的编码规范请参考 [AI代码规范](./docs/AI代码规范.md)。

## License

MIT

---

**重要提醒**：请确保所有测试通过后再进行下一步开发！
