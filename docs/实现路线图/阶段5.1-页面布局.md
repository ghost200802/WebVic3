# 阶段5.1：页面布局

## 目标

实现响应式的页面布局，提供良好的用户导航体验。

**重要提示：**
- 本文档只包含接口定义和功能要求，不包含详细代码实现
- 完成后必须进行单元测试
- 测试覆盖率 > 80% 才能进入下一阶段

---

## 任务清单

- [ ] 实现主布局组件
- [ ] 实现侧边栏组件
- [ ] 实现顶部状态栏组件
- [ ] 实现主题切换功能
- [ ] 编写单元测试

---

## 接口定义要求

### LayoutProps接口

```
interface LayoutProps {
  currentRoute: string
}
```

### SidebarItem接口

```
interface SidebarItem {
  id: string
  label: string
  icon: string
  route: string
  badge?: number
}
```

### SidebarProps接口

```
interface SidebarProps {
  items: SidebarItem[]
  currentRoute: string
  onItemClick: (route: string) => void
}
```

### TopBarProps接口

```
interface TopBarProps {
  gameDate: GameDate
  era: Era
  population: number
  treasury: number
  isPaused: boolean
  onPauseToggle: () => void
}
```

---

## 功能要求

### 布局组件功能

- 响应式布局适配不同屏幕尺寸
- 侧边栏导航菜单
- 顶部状态栏显示
- 主内容区域渲染
- 主题切换（亮色/暗色模式）

### 侧边栏功能

- 显示导航菜单项
- 当前路由高亮显示
- 显示通知徽章
- 支持菜单项点击跳转
- 响应式折叠/展开

### 顶部状态栏功能

- 显示当前游戏日期
- 显示游戏时间
- 显示当前时代
- 显示总人口数量
- 显示资金余额
- 暂停/继续游戏按钮
- 游戏速度调节

---

## 测试要求

### 布局测试

- [ ] 测试响应式布局
- [ ] 测试导航切换
- [ ] 测试主题切换
- [ ] 测试状态栏显示
- [ ] 测试侧边栏折叠
- [ ] 测试暂停/继续按钮

### 测试覆盖率要求

- 代码覆盖率 > 80%
- 所有公共组件必须有测试

---

## 实现文件

在 apps/web/src/components/layout/ 目录下创建以下文件：
- MainLayout.vue - 主布局组件
- Sidebar.vue - 侧边栏组件
- TopBar.vue - 顶部状态栏组件
- index.ts - 导出文件

---

## 测试文件

创建以下测试文件：
- apps/web/src/components/layout/__tests__/MainLayout.test.ts
- apps/web/src/components/layout/__tests__/Sidebar.test.ts
- apps/web/src/components/layout/__tests__/TopBar.test.ts

---

## 测试运行

运行单元测试命令：cd apps/web && pnpm test

运行覆盖率测试：cd apps/web && pnpm test:coverage

---

## 完成标准

### 功能实现完成

- [ ] 主布局组件实现完整
- [ ] 侧边栏组件实现完整
- [ ] 顶部状态栏组件实现完整
- [ ] 主题切换功能实现完整

### 文件创建完成

- [ ] MainLayout.vue 创建完成
- [ ] Sidebar.vue 创建完成
- [ ] TopBar.vue 创建完成
- [ ] index.ts 创建完成

### 测试完成

- [ ] 所有单元测试通过
- [ ] 测试覆盖率 > 80%
- [ ] 所有公共组件有测试

### 代码检查完成

- [ ] pnpm typecheck 通过
- [ ] pnpm lint 通过
- [ ] 无TypeScript错误
- [ ] 无ESLint错误

---

## 进入下一阶段条件

✅ 所有任务清单完成
✅ 所有组件实现完整
✅ 所有单元测试通过
✅ 测试覆盖率 > 80%
✅ TypeScript类型检查通过
✅ ESLint代码检查通过

---

## 下一步

完成阶段5.1后，继续执行阶段5.2-主仪表盘

**重要提醒：** 确保所有测试通过且覆盖率达标后再进入下一阶段！
