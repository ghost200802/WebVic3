# 阶段5.6：人口界面

## 目标

实现人口管理界面，展示人口信息和就业管理功能。

**重要提示：**
- 本文档只包含接口定义和功能要求，不包含详细代码实现
- 完成后必须进行单元测试
- 测试覆盖率 > 80% 才能进入下一阶段

---

## 任务清单

- [ ] 实现人口视图组件
- [ ] 实现人口列表组件
- [ ] 实现人口详情面板组件
- [ ] 实现就业管理面板组件
- [ ] 编写单元测试

---

## 接口定义要求

### PopulationViewProps接口

```
interface PopulationViewProps {
  population: Map<string, Population>
  employment: Map<string, number>
  livingStandards: Map<string, number>
  onAssignWorker: (populationId: string, buildingId: string) => void
  onRemoveWorker: (populationId: string) => void
}
```

### PopulationListProps接口

```
interface PopulationListProps {
  population: Map<string, Population>
  selectedPopulationId: string | null
  onSelect: (populationId: string) => void
}
```

### PopulationDetailProps接口

```
interface PopulationDetailProps {
  population: Population
  livingStandard: number
  employmentRate: number
  onClose: () => void
}
```

### EmploymentPanelProps接口

```
interface EmploymentPanelProps {
  population: Map<string, Population>
  buildings: Building[]
  onAssign: (populationId: string, buildingId: string) => void
  onRemove: (populationId: string) => void
}
```

---

## 功能要求

### 人口列表功能

- 显示所有人口群体
- 显示人口数量
- 显示就业状态
- 显示工资水平
- 显示生活水平
- 按职业筛选
- 支持搜索人口

### 人口详情面板

- 显示人口组成（年龄分布）
- 显示人口数量
- 显示需求满足度（生存、基本、改善、奢侈品）
- 显示收入/支出
- 显示工资水平
- 显示生活水平
- 显示就业率
- 支持关闭面板

### 就业管理面板

- 显示可分配工人
- 显示空闲职位
- 显示建筑列表及可用工位
- 分配工人到建筑
- 解雇工人
- 显示工资成本
- 显示工人技能水平
- 显示教育水平

---

## 测试要求

### 人口界面测试

- [ ] 测试人口列表渲染
- [ ] 测试就业分配
- [ ] 测试详情面板显示
- [ ] 测试生活水平计算
- [ ] 测试工人分配
- [ ] 测试筛选功能
- [ ] 测试搜索功能

### 测试覆盖率要求

- 代码覆盖率 > 80%
- 所有公共组件必须有测试

---

## 实现文件

在 apps/web/src/components/population/ 目录下创建以下文件：
- PopulationView.vue - 人口视图主组件
- PopulationList.vue - 人口列表组件
- PopulationDetail.vue - 人口详情面板组件
- EmploymentPanel.vue - 就业管理面板组件
- index.ts - 导出文件

---

## 测试文件

创建以下测试文件：
- apps/web/src/components/population/__tests__/PopulationView.test.ts
- apps/web/src/components/population/__tests__/PopulationList.test.ts
- apps/web/src/components/population/__tests__/PopulationDetail.test.ts
- apps/web/src/components/population/__tests__/EmploymentPanel.test.ts

---

## 测试运行

运行单元测试命令：cd apps/web && pnpm test

运行覆盖率测试：cd apps/web && pnpm test:coverage

---

## 完成标准

### 功能实现完成

- [ ] 人口视图组件实现完整
- [ ] 人口列表组件实现完整
- [ ] 人口详情面板实现完整
- [ ] 就业管理面板实现完整

### 文件创建完成

- [ ] PopulationView.vue 创建完成
- [ ] PopulationList.vue 创建完成
- [ ] PopulationDetail.vue 创建完成
- [ ] EmploymentPanel.vue 创建完成
- [ ] index.ts 创建完成

### 测试完成

- [ ] 所有单元测试通过
- [ ] 测试覆盖率 > 80%
- [ ] 所有公共组件有测试

### 代码检查完成

- [ ] pnpm typecheck 通过
- [ ] pnpm lint 通过
- [ ] 无TypeScript错误
- [ ] 无ESLint错误

---

## 进入下一阶段条件

✅ 所有任务清单完成
✅ 所有组件实现完整
✅ 所有单元测试通过
✅ 测试覆盖率 > 80%
✅ TypeScript类型检查通过
✅ ESLint代码检查通过

---

## 下一步

完成阶段5.6后，继续执行阶段5.7-科技界面

**重要提醒：** 确保所有测试通过且覆盖率达标后再进入下一阶段！
