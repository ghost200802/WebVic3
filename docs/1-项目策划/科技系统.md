# 科技系统策划文档

## 1. 系统概述

科技系统负责模拟从石器时代到AI时代的技术进步过程。玩家通过投入资源研发科技，解锁新的生产方式、建筑类型和社会制度，推动文明进步。

---

## 2. 核心概念

### 2.1 科技（Technology）

```typescript
interface Technology {
  id: string;
  name: string;
  description: string;
  
  // 时代归属
  era: Era;
  
  // 前置科技
  prerequisites: TechId[];
  
  // 研发成本
  researchCost: number;        // 研发点数
  moneyCost: number;           // 金币成本
  goodsCost: Record<GoodsId, number>; // 物资消耗
  
  // 研发时间
  baseResearchTime: number;    // 基础研发天数
  
  // 解锁内容
  unlocks: {
    buildings?: BuildingTypeId[];
    productionMethods?: ProductionMethodId[];
    goods?: GoodsId[];
    policies?: PolicyId[];
    units?: UnitId[];
  };
  
  // 永久效果
  effects: TechEffect[];
}

interface TechEffect {
  type: 'production_efficiency' | 'military' | 'population' | 'economy';
  target?: string;  // 作用目标
  modifier: number; // 修正值
}
```

### 2.2 时代（Era）

```typescript
enum Era {
  STONE_AGE = 'stone_age',           // 石器时代
  BRONZE_AGE = 'bronze_age',         // 青铜时代
  IRON_AGE = 'iron_age',             // 铁器时代
  CLASSICAL = 'classical',           // 古典时代
  MEDIEVAL = 'medieval',             // 中世纪
  RENAISSANCE = 'renaissance',       // 文艺复兴
  INDUSTRIAL = 'industrial',         // 工业革命
  ELECTRICAL = 'electrical',         // 电气时代
  INFORMATION = 'information',       // 信息时代
  AI_AGE = 'ai_age'                  // AI时代
}
```

### 2.3 时代晋升条件

```typescript
interface EraAdvancementCondition {
  era: Era;
  
  // 必须解锁的科技数量
  requiredTechCount: number;
  
  // 必须解锁的关键科技
  requiredTechs: TechId[];
  
  // 其他条件
  conditions: {
    minPopulation?: number;
    minGDP?: number;
    minBuildings?: { type: BuildingType; count: number }[];
  };
}
```

---

## 3. 科技树设计

### 3.1 石器时代（基础科技）

```
                        [石器时代起始]
                              │
           ┌──────────────────┼──────────────────┐
           │                  │                  │
      [石器制作]         [原始农业]         [火的使用]
           │                  │                  │
           ├─── 简易工坊解锁   ├─── 原始农田解锁   ├─── 人口效率+5%
           └─── 石器工具解锁   └─── 采集效率+10%   └─── 解锁熟食
                    │                  │                  │
                    └────────┬─────────┘                  │
                             │                            │
                      [原始社会]                    [原始建筑]
                             │                            │
                    └─── 社会组织+1                 └─── 简易住所
```

**石器时代科技列表：**

| 科技 | 研发点数 | 时间 | 解锁内容 |
|------|----------|------|----------|
| 石器制作 | 50 | 30天 | 简易工坊、石器工具 |
| 原始农业 | 80 | 45天 | 原始农田、采集效率+10% |
| 火的使用 | 60 | 30天 | 熟食加工、人口效率+5% |
| 原始建筑 | 70 | 35天 | 简易住所、仓库 |
| 原始社会 | 100 | 50天 | 社会组织、人口上限+20% |
| 骨器制作 | 40 | 20天 | 骨制工具 |
| 语言发展 | 90 | 60天 | 科技研发速度+5% |
| 原始宗教 | 80 | 40天 | 人口满意度+5% |

### 3.2 青铜时代

```
[青铜时代起始] ─────────────────────────────────────┐
    │                                               │
    ├── [金属冶炼] ──→ 青铜作坊、青铜工具             │
    │       │                                       │
    │       └── [青铜铸造] ──→ 青铜武器、青铜器      │
    │                                               │
    ├── [文字发明] ──→ 科技速度+10%                  │
    │       │                                       │
    │       └── [早期数学] ──→ 建筑效率+5%          │
    │                                               │
    ├── [灌溉农业] ──→ 灌溉农田、农业效率+20%        │
    │                                               │
    └── [城市兴起] ──→ 城市建筑、人口上限+50%        │
```

**青铜时代科技列表：**

| 科技 | 研发点数 | 时间 | 前置 | 解锁内容 |
|------|----------|------|------|----------|
| 金属冶炼 | 200 | 60天 | 石器制作 | 青铜作坊、铜矿 |
| 文字发明 | 300 | 90天 | 语言发展 | 科技速度+10% |
| 灌溉农业 | 250 | 70天 | 原始农业 | 灌溉农田 |
| 车轮发明 | 180 | 50天 | - | 运输效率+15% |
| 城市规划 | 350 | 80天 | 文字发明 | 城市中心 |
| 天文观测 | 220 | 60天 | 原始宗教 | 农业效率+5% |
| 青铜铸造 | 280 | 70天 | 金属冶炼 | 青铜武器、奢侈青铜器 |
| 贸易制度 | 300 | 75天 | 文字发明 | 商队、市场 |

### 3.3 铁器时代

| 科技 | 研发点数 | 时间 | 前置 | 解锁内容 |
|------|----------|------|------|----------|
| 铁器冶炼 | 400 | 80天 | 金属冶炼 | 铁匠铺、铁矿开采 |
| 铁制农具 | 350 | 70天 | 铁器冶炼 | 农业效率+25% |
| 货币制度 | 450 | 90天 | 文字发明 | 市场效率+20% |
| 建筑学 | 380 | 75天 | 城市规划 | 石质建筑 |
| 法律体系 | 500 | 100天 | 文字发明 | 社会稳定+10% |
| 军事组织 | 420 | 80天 | 青铜铸造 | 军营、铁制武器 |
| 水利工程 | 450 | 85天 | 灌溉农业 | 大型水坝 |
| 天文学 | 400 | 75天 | 天文观测 | 航海+15% |

### 3.4 古典时代

| 科技 | 研发点数 | 时间 | 前置 | 解锁内容 |
|------|----------|------|------|----------|
| 哲学 | 600 | 100天 | 法律体系 | 学院、研究速度+15% |
| 几何学 | 550 | 90天 | 早期数学 | 建筑效率+10% |
| 医学基础 | 650 | 110天 | - | 医院、人口增长+5% |
| 道路建设 | 500 | 80天 | 建筑学 | 贸易效率+20% |
| 混凝土 | 480 | 75天 | 建筑学 | 高级建筑 |
| 航海技术 | 580 | 95天 | 天文学 | 远洋贸易 |
| 奴隶制度 | 400 | 60天 | 法律体系 | 特殊劳动制度 |
| 民主制度 | 700 | 120天 | 哲学 | 政治改革 |

### 3.5 中世纪

| 科技 | 研发点数 | 时间 | 前置 | 解锁内容 |
|------|----------|------|------|----------|
| 封建制度 | 800 | 100天 | 法律体系 | 特殊政治制度 |
| 造纸术 | 750 | 90天 | - | 知识传播+20% |
| 印刷术 | 900 | 110天 | 造纸术 | 研究速度+25% |
| 火药 | 850 | 100天 | - | 火器、采矿效率+15% |
| 风车 | 700 | 80天 | 水利工程 | 面粉效率+20% |
| 行会制度 | 780 | 95天 | 封建制度 | 工匠效率+10% |
| 银行系统 | 880 | 105天 | 货币制度 | 金融系统 |
| 大学 | 950 | 120天 | 印刷术 | 高等教育 |

### 3.6 文艺复兴

| 科技 | 研发点数 | 时间 | 前置 | 解锁内容 |
|------|----------|------|------|----------|
| 科学方法 | 1200 | 100天 | 大学 | 研究速度+30% |
| 天文学革命 | 1100 | 90天 | 天文学 | 航海+20% |
| 解剖学 | 1050 | 85天 | 医学基础 | 医疗效果+25% |
| 会计学 | 1000 | 80天 | 银行系统 | 经济效率+15% |
| 股份公司 | 1300 | 110天 | 银行系统 | 资本主义萌芽 |
| 钟表机械 | 950 | 75天 | 几何学 | 生产效率+10% |
| 冶金改进 | 1150 | 95天 | 火药 | 高炉、钢铁质量 |
| 地理大发现 | 1250 | 105天 | 天文学革命 | 殖民系统 |

### 3.7 工业革命

| 科技 | 研发点数 | 时间 | 前置 | 解锁内容 |
|------|----------|------|------|----------|
| 蒸汽机 | 2000 | 120天 | 冶金改进 | 蒸汽工厂、铁路 |
| 煤炭开采 | 1800 | 100天 | - | 煤矿、蒸汽动力 |
| 纺织机械化 | 1900 | 110天 | 钟表机械 | 现代纺织厂 |
| 工厂制度 | 2200 | 130天 | 股份公司 | 大规模生产 |
| 铁路运输 | 2400 | 140天 | 蒸汽机 | 铁路网络 |
| 化学工业 | 2100 | 125天 | 科学方法 | 化工厂 |
| 电报 | 1700 | 90天 | 电力基础 | 通信效率+30% |
| 机械工具 | 1950 | 115天 | 钟表机械 | 精密制造 |

### 3.8 电气时代

| 科技 | 研发点数 | 时间 | 前置 | 解锁内容 |
|------|----------|------|------|----------|
| 电力 | 3000 | 120天 | 科学方法 | 发电厂、电力网络 |
| 内燃机 | 3200 | 130天 | 石油开采 | 汽车厂、石油工业 |
| 石油开采 | 2800 | 110天 | 地质学 | 油井 |
| 流水线生产 | 3500 | 140天 | 工厂制度 | 生产效率+50% |
| 电话 | 2900 | 100天 | 电力 | 通信+40% |
| 抗生素 | 3800 | 150天 | 化学工业 | 人口增长+10% |
| 飞机 | 4000 | 160天 | 内燃机 | 航空工业 |
| 大规模生产 | 3600 | 140天 | 流水线生产 | 生产成本-20% |

### 3.9 信息时代

| 科技 | 研发点数 | 时间 | 前置 | 解锁内容 |
|------|----------|------|------|----------|
| 计算机 | 5000 | 150天 | 电力 | 计算中心、数据处理 |
| 半导体 | 5500 | 160天 | 化学 | 电子厂、芯片 |
| 互联网 | 6000 | 180天 | 计算机、电话 | 通信革命 |
| 核能 | 5800 | 170天 | 物理学 | 核电站 |
| 生物技术 | 5200 | 155天 | 抗生素 | 生物实验室 |
| 机器人 | 6500 | 190天 | 计算机 | 自动化生产 |
| 卫星技术 | 5400 | 160天 | 飞机 | 通信卫星 |
| 全球化 | 7000 | 200天 | 互联网 | 国际贸易+50% |

### 3.10 AI时代

| 科技 | 研发点数 | 时间 | 前置 | 解锁内容 |
|------|----------|------|------|----------|
| 机器学习 | 10000 | 200天 | 计算机 | AI研究 |
| 深度学习 | 12000 | 220天 | 机器学习 | AI应用 |
| 量子计算 | 15000 | 250天 | 半导体 | 量子计算机 |
| 基因编辑 | 11000 | 210天 | 生物技术 | 生命科学 |
| 可控核聚变 | 18000 | 300天 | 核能 | 无限能源 |
| 全自动驾驶 | 13000 | 230天 | AI、机器人 | 智能交通 |
| 智能制造 | 14000 | 240天 | AI、机器人 | 无人工厂 |
| 脑机接口 | 16000 | 260天 | 生物技术、AI | 人机融合 |

---

## 4. 研发系统

### 4.1 研发点数产出

```typescript
interface ResearchOutput {
  // 基础产出
  baseOutput: number;  // 基于人口基数
  
  // 建筑加成
  buildingBonus: number;  // 学院、大学、实验室
  
  // 人口加成
  populationBonus: number;  // 受教育人口贡献
  
  // 政策加成
  policyBonus: number;  // 科技政策
  
  // 时代加成
  eraBonus: number;  // 后期研发效率更高
}

// 计算公式
function calculateResearchPoints(): number {
  return baseOutput 
    * (1 + buildingBonus) 
    * (1 + populationBonus) 
    * (1 + policyBonus) 
    * eraMultiplier[currentEra];
}

// 时代倍率
const eraMultiplier = {
  [Era.STONE_AGE]: 1.0,
  [Era.BRONZE_AGE]: 1.2,
  [Era.IRON_AGE]: 1.5,
  [Era.CLASSICAL]: 2.0,
  [Era.MEDIEVAL]: 2.5,
  [Era.RENAISSANCE]: 3.5,
  [Era.INDUSTRIAL]: 5.0,
  [Era.ELECTRICAL]: 8.0,
  [Era.INFORMATION]: 15.0,
  [Era.AI_AGE]: 30.0
};
```

### 4.2 研发机构

| 建筑 | 时代 | 研发加成 | 特殊效果 |
|------|------|----------|----------|
| 祭祀场所 | 石器 | +5 | 解锁原始宗教 |
| 书院 | 铁器 | +10 | - |
| 学院 | 古典 | +20 | - |
| 大学 | 中世纪 | +40 | 高等教育解锁 |
| 研究院 | 文艺复兴 | +80 | 研究速度+5% |
| 工业实验室 | 工业 | +150 | 工业科技+20% |
| 现代大学 | 电气 | +300 | 所有科技+10% |
| 科技园 | 信息 | +500 | IT科技+30% |
| AI研究院 | AI | +1000 | AI科技+50% |

### 4.3 研发队列

```typescript
interface ResearchQueue {
  // 当前研究
  current: {
    tech: TechId;
    progress: number;     // 已投入点数
    estimatedCompletion: GameDate;
  };
  
  // 队列
  queue: TechId[];        // 最多5个
  
  // 研究速度
  researchSpeed: number;  // 受加成影响
}
```

---

## 5. 科技扩散

### 5.1 自然扩散

与领先文明的科技差距会自然缩小：

```
扩散速度 = 基础扩散率 × 贸易联系 × 文化相似度 × 落后程度

// 落后程度越大，扩散越快（后发优势）
落后程度 = (领先者科技数 - 我方科技数) / 领先者科技数
```

### 5.2 主动获取

| 方式 | 条件 | 效果 |
|------|------|------|
| 科技交换 | 外交关系 | 互换已知科技 |
| 科技购买 | 金币 | 直接购买科技 |
| 间谍窃取 | 间谍系统 | 有风险获取 |
| 书籍贸易 | 贸易系统 | 加速扩散 |

---

## 6. 科技效果

### 6.1 生产效率提升

| 科技类别 | 效果范围 | 典型提升 |
|----------|----------|----------|
| 农业科技 | 农业产出 | +5%~+50% |
| 采矿科技 | 采矿产出 | +5%~+40% |
| 制造科技 | 工业产出 | +10%~+100% |
| 能源科技 | 能源效率 | +20%~+200% |

### 6.2 新建筑解锁

科技解锁建筑的机制：
1. 科技研发完成 → 建筑类型可用
2. 建筑可能有额外条件（资源、时代）
3. 建筑可能有多个生产方式可选

### 6.3 新商品解锁

| 科技 | 解锁商品 |
|------|----------|
| 铁器冶炼 | 铁器、铁制工具 |
| 造纸术 | 纸张 |
| 印刷术 | 书籍 |
| 化学工业 | 化学品、炸药 |
| 电力 | 电力（作为商品） |
| 半导体 | 电子元件、芯片 |
| 计算机 | 软件、数据服务 |

---

## 7. 时代晋升系统

### 7.1 晋升条件

| 时代 | 必要科技 | 人口要求 | GDP要求 | 特殊条件 |
|------|----------|----------|---------|----------|
| 青铜 | 金属冶炼 | 1000 | - | - |
| 铁器 | 铁器冶炼 | 5000 | - | - |
| 古典 | 哲学+法律 | 20000 | - | 城市中心×3 |
| 中世纪 | 封建制度 | 50000 | - | 城堡×2 |
| 文艺复兴 | 科学方法+印刷术 | 100000 | 100000 | 大学×2 |
| 工业 | 蒸汽机 | 500000 | 1000000 | 煤矿×3 |
| 电气 | 电力 | 1000000 | 5000000 | 发电厂×2 |
| 信息 | 计算机+互联网 | 5000000 | 20000000 | 科技园×1 |
| AI | 深度学习 | 10000000 | 100000000 | AI研究院×1 |

### 7.2 时代效果

晋升到新时代时：
1. 解锁新科技树分支
2. 解锁新建筑类型
3. 解锁新政策选项
4. 获得一次性奖励（人口增长、效率提升等）

---

## 8. UI设计

### 8.1 科技总览面板

```
┌─────────────────────────────────────────────────────────────┐
│ 🔬 科技总览                                       [当前时代] │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ 当前时代: 铁器时代                    [晋升条件] [查看]     │
│ 研发点数: 125/天                      队列: 3/5            │
│                                                             │
│ ─── 正在研究 ──────────────────────────────────────────     │
│ [货币制度]  ████████████████░░░░░░░░░░  67%   预计 12天    │
│                                                             │
│ ─── 研发队列 ──────────────────────────────────────────     │
│ 1. 建筑学                                                   │
│ 2. 军事组织                                                 │
│ 3. 水利工程                                                 │
│                                                             │
│ ─── 可研究科技 ──────────────────────────────────────────   │
│ [全部] [农业] [工业] [军事] [文化]                         │
│                                                             │
│ ⚔️ 军事组织          ⏱ 80天    📊 420点                    │
│    解锁: 军营、铁制武器                                     │
│    前置: 青铜铸造 ✓                    [加入队列]           │
│                                                             │
│ 🏗️ 建筑学            ⏱ 75天    📊 380点                    │
│    解锁: 石质建筑、高级仓库                                 │
│    前置: 城市规划 ✓                    [加入队列]           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 8.2 科技树视图

```
┌─────────────────────────────────────────────────────────────┐
│ 🌳 科技树                                                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ [石器] ← [青铜] ← [铁器] ← [古典] ← [中世纪] ← ...         │
│   ●        ●        ◐        ○         ○                   │
│                                                             │
│ ─── 铁器时代科技树 ─────────────────────────────────────    │
│                                                             │
│                    [铁制农具]                               │
│                        ↑                                    │
│     [铁器冶炼] ────→ [军事组织] ────→ [铁制武器]           │
│         ↓               ↑                                  │
│     [建筑学]         [法律体系]                             │
│         ↓               ↑                                  │
│     [石质建筑] ←── [货币制度] ───→ [市场改革]              │
│                                                             │
│  ● 已研究  ◐ 研究中  ○ 未解锁  ○ 可研究                    │
│                                                             │
│ 点击节点查看详情                                            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 8.3 科技详情面板

```
┌─────────────────────────────────────────────────────────────┐
│ 🔬 蒸汽机                                       [×] 关闭    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ 时代: 工业革命                                              │
│                                                             │
│ ─── 研发成本 ──────────────────────────────────────────     │
│ 📊 研发点数: 2000                                           │
│ 💰 金币: 5000                                               │
│ 📦 物资: 钢材×50, 煤炭×100                                  │
│ ⏱ 研发时间: 120天                                           │
│                                                             │
│ ─── 前置科技 ──────────────────────────────────────────     │
│ ✓ 冶金改进                                                  │
│ ✓ 机械工具                                                  │
│ ✓ 煤炭开采                                                  │
│                                                             │
│ ─── 解锁内容 ──────────────────────────────────────────     │
│ 🏭 建筑: 蒸汽工厂、铁路车站                                 │
│ 🔧 生产方式: 蒸汽动力                                       │
│ 📈 效果: 生产效率+30%, 运输效率+50%                         │
│                                                             │
│ ─── 描述 ──────────────────────────────────────────────     │
│ 蒸汽机的发明标志着工业革命的开始，将热能转化为              │
│ 机械能，极大地提高了生产效率。                              │
│                                                             │
│ [加入队列]  [设为重点]                                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 9. 科技平衡参数

### 9.1 研发速度

| 时代 | 每日基础研发点数 | 建筑加成上限 |
|------|------------------|--------------|
| 石器 | 1-2 | +50% |
| 青铜 | 2-4 | +100% |
| 铁器 | 4-8 | +150% |
| 古典 | 8-15 | +200% |
| 中世纪 | 15-30 | +300% |
| 文艺复兴 | 30-60 | +500% |
| 工业 | 60-150 | +800% |
| 电气 | 150-400 | +1200% |
| 信息 | 400-1000 | +2000% |
| AI | 1000+ | +5000% |

### 9.2 科技数量分布

| 时代 | 科技数量 | 平均研发时间 |
|------|----------|--------------|
| 石器 | 8 | 35天 |
| 青铜 | 8 | 70天 |
| 铁器 | 8 | 80天 |
| 古典 | 8 | 95天 |
| 中世纪 | 8 | 95天 |
| 文艺复兴 | 8 | 95天 |
| 工业 | 8 | 125天 |
| 电气 | 8 | 135天 |
| 信息 | 8 | 175天 |
| AI | 8 | 250天 |

### 9.3 科技差距追赶

- 落后1个时代：研究速度+20%
- 落后2个时代：研究速度+40%
- 落后3个时代：研究速度+60%
