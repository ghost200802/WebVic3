# 生产系统策划文档

## 1. 系统概述

生产系统是游戏的核心经济引擎，负责模拟从石器时代到AI时代的商品生产过程。系统需要处理生产链、生产方式选择、效率计算、资源消耗等核心经济活动。

---

## 2. 核心概念

### 2.1 商品（Goods）
商品是生产系统的基本单位，分为以下类型：

| 类型 | 说明 | 示例 |
|------|------|------|
| 原料 | 自然获取或初级加工 | 粮食、木材、矿石 |
| 中间品 | 需要进一步加工 | 面粉、布匹、钢材 |
| 最终品 | 直接消费 | 面包、服装、工具 |
| 奢侈品 | 提升生活水平 | 珠宝、香料、艺术品 |
| 军用品 | 军事消耗 | 武器、盔甲 |

### 2.2 建筑（Building）
建筑是进行生产的场所，具有以下属性：

```typescript
interface Building {
  id: string;
  name: string;
  type: BuildingType;
  
  // 时代限制
  minEra: Era;
  maxEra?: Era;
  
  // 建造成本
  constructionCost: Record<GoodsId, number>;
  constructionTime: number; // 游戏内天数
  
  // 运营参数
  baseWorkers: number;      // 基础工位数
  maxWorkers: number;       // 最大工位数
  baseThroughput: number;   // 基础产能
  
  // 生产配置
  productionMethods: ProductionMethodId[];
}
```

### 2.3 生产方式（Production Method）
同一建筑可选择不同的生产方式：

```typescript
interface ProductionMethod {
  id: string;
  name: string;
  
  // 解锁条件
  requiredTech?: TechId[];
  requiredEra?: Era;
  
  // 投入产出
  inputs: Record<GoodsId, number>;   // 每单位生产消耗
  outputs: Record<GoodsId, number>;  // 每单位生产产出
  
  // 效率修正
  throughputModifier: number;  // 产能修正
  workerEfficiency: number;    // 工人效率
  
  // 其他特性
  pollution?: number;          // 污染产出（工业时代后）
  automationLevel: number;     // 自动化程度（0-1）
}
```

---

## 3. 生产计算公式

### 3.1 基础产出计算

```
实际产出 = 基础产能 × 生产方式修正 × 工人效率 × 科技修正 × 设施修正
```

### 3.2 工人效率

```
工人效率 = 基础效率 × (1 + 教育水平) × (1 + 生活水平加成) × 工具加成
```

- **基础效率**：1.0
- **教育水平**：根据人口受教育程度，0-0.5
- **生活水平加成**：根据人口生活水平，0-0.3
- **工具加成**：工具商品充足度，0-0.5

### 3.3 生产周期

- 游戏内1天为一个生产周期
- 每周期消耗投入品，产出商品
- 投入品不足时，产出按比例降低

```
实际产出 = 理论产出 × min(各投入品充足率)
```

---

## 4. 建筑类型设计

### 4.1 原始生产建筑

| 建筑 | 时代 | 产出 | 投入 | 工位 |
|------|------|------|------|------|
| 采集营地 | 石器 | 食物(采集) | - | 5 |
| 狩猎营地 | 石器 | 肉类、皮革 | - | 5 |
| 原始农田 | 石器 | 谷物 | - | 10 |
| 简易工坊 | 石器 | 石器、骨器 | 石材、骨材 | 3 |

### 4.2 农业生产建筑

| 建筑 | 时代 | 产出 | 投入 | 工位 |
|------|------|------|------|------|
| 农田 | 青铜 | 谷物 | - | 20 |
| 牧场 | 青铜 | 肉类、皮革、羊毛 | - | 15 |
| 果园 | 青铜 | 水果 | - | 10 |
| 渔场 | 青铜 | 鱼类 | 船只 | 8 |
| 磨坊 | 铁器 | 面粉 | 谷物 | 5 |

### 4.3 采矿建筑

| 建筑 | 时代 | 产出 | 投入 | 工位 |
|------|------|------|------|------|
| 石矿 | 石器 | 石材 | - | 10 |
| 铜矿 | 青铜 | 铜矿 | 工具 | 15 |
| 锡矿 | 青铜 | 锡矿 | 工具 | 10 |
| 铁矿 | 铁器 | 铁矿 | 工具 | 20 |
| 煤矿 | 工业 | 煤炭 | 工具 | 25 |
| 油井 | 电气 | 石油 | - | 10 |

### 4.4 制造建筑

| 建筑 | 时代 | 产出 | 投入 | 工位 |
|------|------|------|------|------|
| 青铜作坊 | 青铜 | 青铜器 | 铜、锡 | 8 |
| 铁匠铺 | 铁器 | 铁器、工具 | 铁矿、煤炭 | 10 |
| 纺织作坊 | 铁器 | 布匹 | 羊毛、棉花 | 15 |
| 陶瓷窑 | 铁器 | 陶瓷 | 粘土 | 8 |
| 造纸坊 | 中世纪 | 纸张 | 木材 | 6 |

### 4.5 工业建筑

| 建筑 | 时代 | 产出 | 投入 | 工位 |
|------|------|------|------|------|
| 钢铁厂 | 工业 | 钢材 | 铁矿、煤炭 | 50 |
| 机械厂 | 工业 | 机械 | 钢材 | 40 |
| 化工厂 | 电气 | 化学品 | 煤炭、石油 | 30 |
| 发电厂 | 电气 | 电力 | 煤炭/石油 | 20 |
| 汽车厂 | 电气 | 汽车 | 钢材、橡胶 | 60 |

### 4.6 现代建筑

| 建筑 | 时代 | 产出 | 投入 | 工位 |
|------|------|------|------|------|
| 电子厂 | 信息 | 电子元件 | 稀土、塑料 | 80 |
| 软件公司 | 信息 | 软件 | 电力、高学历劳动力 | 50 |
| 生物实验室 | 信息 | 药品 | 化学品 | 30 |
| AI数据中心 | AI | AI服务 | 电力、硬件 | 100 |
| 机器人工厂 | AI | 机器人 | 钢材、电子元件 | 70 |

---

## 5. 生产链示例

### 5.1 食品生产链

```
原始:
采集营地 → 食物(直接)

传统:
农田 → 谷物 → 磨坊 → 面粉 → 面包房 → 面包

现代:
农场(机械化) → 谷物 → 现代面粉厂 → 面粉 → 现代面包厂 → 面包
```

### 5.2 工具生产链

```
石器时代:
石矿 → 石材 → 简易工坊 → 石器

青铜时代:
铜矿 + 锡矿 → 青铜作坊 → 青铜器

铁器时代:
铁矿 → 铁匠铺 → 铁器/工具

工业时代:
铁矿 + 煤炭 → 钢铁厂 → 钢材 → 机械厂 → 机械工具

现代:
钢材 + 电子元件 → 精密工具厂 → 电动工具
```

### 5.3 纺织生产链

```
传统:
牧场 → 羊毛 → 纺织作坊 → 布匹 → 染坊 → 染色布 → 服装作坊 → 服装

工业:
棉花种植园 → 棉花 → 现代纺织厂 → 布匹 → 现代服装厂 → 服装
```

---

## 6. 生产方式演进

### 6.1 农业生产方式

| 生产方式 | 时代 | 效率 | 特点 |
|----------|------|------|------|
| 刀耕火种 | 石器 | 1x | 低产出，需休耕 |
| 畜力耕作 | 青铜 | 1.5x | 需要牲畜 |
| 铁犁牛耕 | 铁器 | 2x | 效率提升 |
| 轮作制 | 中世纪 | 2.5x | 土地利用率提升 |
| 农业革命 | 工业 | 4x | 新作物品种 |
| 机械化 | 电气 | 8x | 拖拉机、收割机 |
| 现代农业 | 信息 | 12x | 化肥、农药、转基因 |
| 智能农业 | AI | 20x | 自动化、精准农业 |

### 6.2 制造业生产方式

| 生产方式 | 时代 | 效率 | 特点 |
|----------|------|------|------|
| 手工制作 | 石器-铁器 | 1x | 低产能，高质量 |
| 作坊分工 | 中世纪 | 1.5x | 工匠专业化 |
| 工厂制度 | 工业 | 3x | 集中生产 |
| 流水线 | 电气 | 6x | 标准化 |
| 自动化 | 信息 | 10x | 机器人辅助 |
| 智能制造 | AI | 20x | 全自动化 |

---

## 7. 资源系统

### 7.1 资源类型

| 类型 | 说明 | 示例 |
|------|------|------|
| 可再生 | 持续产出 | 农产品、木材 |
| 有限资源 | 开采耗尽 | 矿产、石油 |
| 全球资源 | 全地图共享 | 海洋渔业 |

### 7.2 资源枯竭

```typescript
interface ResourceDeposit {
  type: GoodsId;
  totalAmount: number;      // 总储量
  currentAmount: number;    // 剩余储量
  extractionRate: number;   // 开采难度系数
  
  // 资源枯竭后可转换
  depletedConversion?: {
    to: BuildingType;       // 如: 废弃矿坑 → 旅游景点
  };
}
```

---

## 8. 产能升级系统

### 8.1 建筑升级

建筑可通过以下方式升级：
1. **扩建**：增加工位上限
2. **现代化**：解锁新的生产方式
3. **自动化**：减少劳动力需求

### 8.2 升级成本

```
升级成本 = 基础成本 × (1 + 已升级次数 × 0.5)
```

---

## 9. UI设计

### 9.1 生产面板

```
┌─────────────────────────────────────────────────┐
│ 📊 生产总览                        [日] [周] [月] │
├─────────────────────────────────────────────────┤
│                                                 │
│ 💰 总产值: 12,450  📈 较上周 +5.2%              │
│ 👷 就业人数: 1,234 / 1,500                      │
│                                                 │
│ ─────────────────────────────────────────────── │
│ 建筑列表                                        │
│                                                 │
│ 🏭 钢铁厂 #1                    [详情] [升级]   │
│    产出: 钢材 120/天 | 效率: 95% | 工人: 45/50  │
│    ████████████████░░░ 产出进度                 │
│                                                 │
│ 🌾 农田 #3                      [详情] [升级]   │
│    产出: 谷物 80/天 | 效率: 100% | 工人: 18/20  │
│    ████████████████████ 产出进度                │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 9.2 建筑详情面板

```
┌─────────────────────────────────────────────────┐
│ 🏭 钢铁厂 #1                          [×] 关闭  │
├─────────────────────────────────────────────────┤
│                                                 │
│ 生产方式: [高炉炼钢 ▼]                          │
│ ├─ 传统炼钢                                     │
│ ├─ 高炉炼钢 ★ (当前)                            │
│ └─ 电弧炉炼钢 (需科技: 电气化)                  │
│                                                 │
│ ─── 投入 ──────────────── 产出 ───              │
│ 铁矿  -180/天             钢材 +120/天          │
│ 煤炭  -90/天                                     │
│                                                 │
│ ─── 运营状况 ───────────────────────────────    │
│ 工人: 45/50 (可调整: [-] [45] [+])              │
│ 效率: 95% (工具不足 -5%)                        │
│ 日利润: +¥2,340                                 │
│                                                 │
│ [暂停生产]  [拆除建筑]  [扩建]                  │
└─────────────────────────────────────────────────┘
```

---

## 10. 数据平衡要点

### 10.1 投入产出比
- 原料生产：产出价值 ≈ 投入成本 × 1.2
- 中间品生产：产出价值 ≈ 投入成本 × 1.5
- 最终品生产：产出价值 ≈ 投入成本 × 2.0

### 10.2 工人产出
- 石器时代工人日均产出价值：~10
- 工业时代工人日均产出价值：~100
- AI时代工人日均产出价值：~1000

### 10.3 建筑成本回收
- 基础建筑：30-60游戏日回收成本
- 高级建筑：60-120游戏日回收成本
