# 阶段1环境安装说明

## 前置条件

在运行WebVic3项目之前，需要先安装以下工具：

### 1. 安装Node.js

项目需要Node.js 20.x LTS版本。

#### macOS安装方式

**方式1：使用Homebrew（推荐）**
```bash
brew install node@20
```

**方式2：使用官方安装包**
访问 https://nodejs.org/ 下载并安装LTS版本（20.x）

**方式3：使用nvm（推荐）**
```bash
# 安装nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# 重新加载shell配置
source ~/.bashrc  # 或 source ~/.zshrc

# 安装Node.js 20.x
nvm install 20
nvm use 20
nvm alias default 20
```

#### 验证安装
```bash
node --version  # 应该显示 v20.x.x
npm --version   # 应该显示 10.x.x
```

### 2. 安装pnpm

pnpm是本项目使用的包管理器。

```bash
npm install -g pnpm
```

#### 验证安装
```bash
pnpm --version  # 应该显示 8.x.x 或更高
```

### 3. 安装MongoDB（可选，用于后端开发）

如果需要运行后端服务，需要安装MongoDB。

#### macOS安装方式
```bash
brew tap mongodb/brew
brew install mongodb-community
```

#### 启动MongoDB
```bash
brew services start mongodb-community
```

#### 验证MongoDB运行
```bash
mongosh --eval "db.version()"
```

## 安装项目依赖

安装完Node.js和pnpm后，在项目根目录运行：

```bash
cd /Users/work/WebVic3
pnpm install
```

## 验证安装

运行以下命令验证项目配置正确：

```bash
# 类型检查
pnpm typecheck

# 代码检查
pnpm lint

# 运行测试
pnpm test
```

## 启动开发环境

### 同时启动前端和后端

```bash
pnpm dev
```

### 仅启动前端

```bash
pnpm dev:web
```

访问 http://localhost:3000

### 仅启动后端

```bash
pnpm dev:server
```

访问 http://localhost:3001

## 常见问题

### Q: pnpm命令找不到
A: 确保已全局安装pnpm：`npm install -g pnpm`，或检查PATH环境变量

### Q: node命令找不到
A: 需要先安装Node.js，参考上面的安装步骤

### Q: MongoDB连接失败
A: 确保MongoDB服务已启动：`brew services start mongodb-community`

### Q: 端口被占用
A: 可以在配置文件中修改端口号，或关闭占用端口的进程

## 下一步

完成环境安装后，继续阅读 [阶段2-核心数据模型](./实现路线图/阶段2-核心数据模型.md)
